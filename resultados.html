<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados de Ansiedad</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: #fff;
            border-radius: 1.5rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            padding: 2rem 2.5rem;
            margin-top: 40px;
            max-width: 700px;
            width: 100%;
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            font-weight: 700;
            color: #222;
            margin-bottom: 2rem;
        }
        #volver-btn {
            display: block;
            margin: 2rem auto 0 auto;
            background: #2563eb;
            color: #fff;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            padding: 10px 24px;
            cursor: pointer;
            font-size: 1rem;
        }
        @media (max-width: 600px) {
            .container { padding: 1rem 0.5rem; }
        }
        .rail-menu {
            position: fixed;
            top: 0; left: 0; bottom: 0;
            width: 90px;
            background: #e0e7ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 30px;
            z-index: 100;
        }
        .rail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            color: #2563eb;
            text-decoration: none;
            font-size: 1.6em;
            font-weight: 600;
            transition: background 0.2s, color 0.2s;
            border-radius: 12px;
            padding: 10px 0 4px 0;
            width: 70px;
        }
        .rail-item span {
            font-size: 0.75em;
            font-weight: 500;
            margin-top: 2px;
        }
        .rail-item.active, .rail-item:hover {
            background: #2563eb;
            color: #fff;
        }
        @media (max-width: 700px) {
            .rail-menu {
                flex-direction: row;
                width: 100vw;
                height: 70px;
                left: 0; right: 0; top: 0; bottom: unset;
                padding: 0;
                justify-content: center;
            }
            .rail-item {
                margin: 0 10px 0 10px;
                width: 60px;
                font-size: 1.3em;
                padding: 8px 0 2px 0;
            }
        }
        .container { margin-left: 110px; }
        @media (max-width: 700px) {
            .container { margin-left: 0; margin-top: 80px; }
        }
    </style>
</head>
<body>
    <nav class="rail-menu">
        <a href="body.html" class="rail-item" title="S√≠ntomas">üßë‚Äç‚öïÔ∏è<br><span>S√≠ntomas</span></a>
        <a href="resultados.html" class="rail-item active" title="Resultados de s√≠ntomas">üìä<br><span>Resultados</span></a>
        <a href="checklist.html" class="rail-item" title="Checklist detonantes">üìù<br><span>Checklist</span></a>
        <a href="resultados-checklist-sheetdb.html" class="rail-item" title="Resultados checklist (SheetDB)">üîó<br><span>SheetDB</span></a>
    </nav>
    <div class="container">
        <div style="position: absolute; top: 18px; right: 28px; z-index: 30;">
            <a href="body.html" title="Volver" style="font-size: 1.7em; color: #2563eb; text-decoration: none; font-weight: bold; background: none; border-radius: 6px; padding: 0 8px; transition: background 0.2s;">‚¨ÖÔ∏è</a>
        </div>
        <h1>Resultados de S√≠ntomas de Ansiedad</h1>
        <canvas id="grafico"></canvas>
    </div>
    <script>
        // Nombres legibles para los s√≠ntomas
        const symptomLabels = {
            'symptom-preocupacion': 'Preocupaci√≥n excesiva',
            'symptom-hombros': 'Hombros tensos',
            'symptom-dolores': 'Dolores de cabeza',
            'symptom-mareos': 'Mareos o debilidad',
            'symptom-mente': 'Mente acelerada/dif. concentraci√≥n',
            'symptom-manos': 'Manos entumecidas/hormigueo',
            'symptom-piernas': 'Piernas temblorosas',
            'symptom-malestar': 'Malestar estomacal/nerviosismo',
            'symptom-musculos': 'M√∫sculos tensos',
            'symptom-palpitaciones': 'Palpitaciones',
            'symptom-sudoracion': 'Sudoraci√≥n o escalofr√≠os',
            'symptom-respiracion': 'Respiraci√≥n acelerada'
        };
        const symptomIds = Object.keys(symptomLabels);

        // Leer datos de localStorage
        let counters = {};
        const saved = localStorage.getItem('ansiedad_counters');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                symptomIds.forEach(id => {
                    counters[id] = typeof parsed[id] === 'number' ? parsed[id] : 0;
                });
            } catch {
                symptomIds.forEach(id => { counters[id] = 0; });
            }
        } else {
            symptomIds.forEach(id => { counters[id] = 0; });
        }

        // Preparar datos para Chart.js
        const data = {
            labels: symptomIds.map(id => symptomLabels[id]),
            datasets: [{
                label: 'Veces seleccionado',
                data: symptomIds.map(id => counters[id]),
                backgroundColor: [
                    '#fed7aa', '#bbf7d0', '#fde68a', '#fef9c3', '#d1d5db', '#fbcfe8', '#a5f3fc', '#e9d5ff', '#e5e7eb', '#bae6fd', '#fde68a', '#bbf7d0'
                ],
                borderRadius: 8,
                borderWidth: 1
            }]
        };

        const ctx = document.getElementById('grafico').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: data,
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    title: { display: false }
                },
                scales: {
                    x: {
                        ticks: { color: '#222', font: { size: 13 } },
                        grid: { display: false }
                    },
                    y: {
                        beginAtZero: true,
                        ticks: { color: '#222', font: { size: 13 }, stepSize: 1 },
                        grid: { color: '#e5e7eb' }
                    }
                }
            }
        });
    </script>
</body>
</html> 